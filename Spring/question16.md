#### Dependency Injection (방법 3가지)

#### 의존관계 주입이란?
- 특정 객체를 스프링 컨테이너에 빈으로 등록하여 관리하고, 이를 사용할 때, 사용하는 곳에서 직접 객체를 생성하지 않고
스프링 컨테이너에 등록되고, 스프링 컨테이너에서 관리되는 객체를 가져오는 방식이다.
- 직접 객체를 생성하는 것이 아니라, 이미 생성된 객체를 외부에서 주입받기 때문에 의존관계 주입이라고 한다.

#### 의존성 주입 방법 3가지

##### 생성자 주입
- 가장 권장되는 방식이다. 생성자를 통해 의존관계를 주입받는 방식이다. 생성자를 통해 주입받으면 객체를 불변 상태로 유지할 수 있다.
- 필수적인 의존 관계가 Null이 되지 않도록 보장한다.
##### 수정자 주입
- Setter 메서드를 통해 주입하는 방법인데, 주로 선택적 의존성에 사용된다.
- 그러나 Setter 메서드를 사용하기 때문에 상태가 변하기 쉽다. 불완전하다!

##### 필드 주입
- @Autowired 어노테이션을 사용하는 것이다. 간단한 방법이지만 스프링에서는 권장하지 않는 방법이다.
- 테스트가 어렵다. 또한 객체의 의존 관계가 명확하게 드러나지 않아 유연성과 가독성이 떨어진다.

#### 적절하게 사용하려면
- 필수적으로 들어가야 하는 의존 관계에는 생성자 주입을 사용하고, 선택적인 의존 관계에는 수정자 주입을 사용한다.
- 수정자 주입은 신중하게 사용해야 한다. 마구잡이로 사용하게 되면 null 검사를 사용한 모든 곳에서 수행해야 할 수 있다.

#### 순환 참조 관계
- 생성자 주입을 사용할 경우 순환 참조 관계가 발생할 수 있다.
- 해결을 위한 방법으로 특정 클래스의 주입 방법을 생성자 주입에서 수정자 주입으로 변경한다. 수정자 주입은 스프링이 빈을 먼저 생성하고, 이후에
의존 관계를 주입하기 때문에 순환 문제를 해결할 수 있다.
- @Lazy 어노테이션을 사용하여 빈의 초기화를 지연시킨다. 생성자의 매개변수에 @Lazy를 붙여서 필요한 시점에만 생성하도록 하여 해결할 수 있다.
- 가장 좋은 것은 설계를 똑바로 하는 것이다. 처음에 의존관계 주입할 때 순환 참조 관계가 발생하지 않도록 신중하게 고민하고 설계해야 하는 것이 좋지 않을까 싶다.
